<header>
  <div class="bg-dark">
    <div class="container">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-dark">
        <!-- Logo -->
        <a class="navbar-brand d-flex align-items-center" href="/">
          <img src="/logo.png" alt="Logo-img" class="logo-size me-2" />
        </a>

        <!-- Toggle button per il mobile -->
        <button
          class="navbar-toggler"
          type="button"
          (click)="toggleNavbar()"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Contenuto Navbar -->
        <div
          class="collapse navbar-collapse"
          [class.show]="isNavbarCollapsed"
          id="navbarContent"
        >
          <div class="d-flex flex-column flex-lg-row w-100">
            <!-- Barra di ricerca -->
            <form class="flex-grow-1 d-flex position-relative my-3 my-lg-0">
              <input
                type="text"
                class="form-control search-bar me-2"
                placeholder="Search products..."
                [(ngModel)]="searchTerm"
                (input)="onSearch()"
                name="search"
                aria-label="Search"
              />
              <!-- Dropdown suggerimenti -->
              <ul
                class="list-group position-absolute dropdown-suggestions"
                *ngIf="suggestedProducts.length > 0"
              >
                <li
                  *ngFor="let product of suggestedProducts"
                  class="list-group-item list-group-item-action d-flex align-items-center"
                  (click)="onSelectProduct(product)"
                >
                  <img
                    [src]="product.thumbnail"
                    alt="{{ product.title }}"
                    class="thumbnail me-2"
                  />
                  <span>{{ product.title }}</span>
                </li>
              </ul>
            </form>

            <!-- Link della navbar -->
            <ul
              class="navbar-nav ms-auto gap-4 justify-content-lg-end justify-content-center my-2 my-lg-0"
            >
              <li class="nav-item">
                <a
                  [routerLink]="['home']"
                  class="nav-link d-flex align-items-center"
                  (mouseover)="onHoverHome()"
                  (mouseout)="onHoverOutHome()"
                  (click)="closeNavbar()"
                >
                  <img
                    [src]="isHoveredHome ? '/home.gif' : '/home.png'"
                    alt="Home-Icon"
                    class="icon"
                    [ngClass]="{ 'gif-active': isHoveredHome }"
                  />
                  <span class="ms-2">Home</span>
                </a>
              </li>
              <li class="nav-item">
                <a
                  [routerLink]="['products']"
                  class="nav-link d-flex align-items-center"
                  (mouseover)="onHoverShop()"
                  (mouseout)="onHoverOutShop()"
                  (click)="closeNavbar()"
                >
                  <img
                    [src]="isHoveredShop ? '/shop.gif' : '/shop.png'"
                    alt="Shop-Icon"
                    class="icon"
                    [ngClass]="{ 'gif-active': isHoveredShop }"
                  />
                  <span class="ms-2">Products</span>
                </a>
              </li>
              <li class="nav-item">
                <a
                  [routerLink]="['cart']"
                  class="nav-link d-flex align-items-center position-relative"
                  (mouseover)="onHoverCart()"
                  (mouseout)="onHoverOutCart()"
                  (click)="closeNavbar()"
                >
                  <img
                    [src]="
                      isHoveredCart
                        ? '/shopping-cart.gif'
                        : '/shopping-cart.png'
                    "
                    alt="Cart-Icon"
                    class="icon"
                    [ngClass]="{ 'gif-active': isHoveredCart }"
                  />
                  <span class="ms-2">Cart</span>
                  <!-- Badge dinamico -->
                  <span
                    *ngIf="cartCount > 0"
                    class="position-absolute badge rounded-pill bg-danger badge-position"
                  >
                    {{ cartCount }}
                  </span>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </div>
  </div>
</header>
